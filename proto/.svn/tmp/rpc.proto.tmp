// Author: Alex Thomson
//
// One protobuf to use as request and response header for all RPCs.

//import "scalar.proto";

message RPCHeaderProto {
  // Specifies whether this is a request or response.
  enum Type {
    REQUEST = 1;
    RESPONSE = 2;
    DATA = 3;
    START_MAIN_LOOP = 4;
  }
  optional Type type = 1;

  // Client (requester) info.
  optional uint64 client_machine = 11;
  optional uint64 client_result_ptr = 12;    // Synchronous request result ptr.
  optional string client_app = 13;           // App to hand callback request to.
  optional string client_callback_rpc = 14;  // Callback rpc requested.
//  repeated ScalarProto client_callback_rpc_args = 15;  // Additional info for
                                                       // callback function to
                                                       // use.
  optional uint64 client_callback_rpc_args = 15;

  // MachineID at which procedure should run.
  optional uint64 server_machine = 21;
  optional string server_app = 22;
  optional string server_rpc = 23;
  optional string server_channel = 24;  // For DATA messages.
}

